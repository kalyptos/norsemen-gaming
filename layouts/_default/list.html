{{ define "main" }}
{{ if .IsHome }}
<div class="hero">
    <h1>Velkommen til Norsemen Gaming</h1>
    <p>Hvor vikingene møter pikslene - norsk gaming på sitt beste!</p>
</div>

<div class="content-grid">
    <h2>🎮 Nyeste Gaming-poster</h2>
    <div class="post-list">
        {{ range first 6 (where .Site.RegularPages "Section" "posts" | sort "Date" "desc") }}
        <div class="post-card">
            {{ if .Params.featured_image }}
            <img src="{{ .Params.featured_image }}" alt="{{ .Title }}" class="post-image">
            <div class="post-overlay">NYE SPILL</div>
            {{ else }}
            <div style="height: 200px; background: linear-gradient(45deg, #DAA520, #FF6F61); display: flex; align-items: center; justify-content: center;">
                <span style="font-size: 3rem;">🎮</span>
            </div>
            {{ end }}
            <div class="post-content">
                <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
                <p class="date">{{ .Date.Format "2. January 2006" }}</p>
                {{ if .Summary }}
                <p class="summary">{{ .Summary | truncate 120 }}</p>
                {{ end }}
            </div>
        </div>
        {{ end }}
    </div>
    
    <div style="text-align: center; margin-top: 3rem;">
        <a href="/posts/" style="color: #DAA520; text-decoration: none; font-weight: bold; padding: 1rem 2rem; border: 2px solid #DAA520; border-radius: 25px; transition: all 0.3s ease; display: inline-block;">
            ⚔️ Se alle gaming-poster →
        </a>
    </div>
</div>

{{ else }}
<!-- Posts page or other section pages -->
<div class="content-grid">
    <h2>{{ if eq .Section "posts" }}🎮 Alle Gaming-poster{{ else }}{{ .Title }}{{ end }}</h2>
    
    {{ if eq .Section "posts" }}
    <p style="color: #F5E8D8; opacity: 0.8; margin-bottom: 2rem; text-align: center;">
        Utforsk alle våre gaming-anmeldelser, nyheter og artikler sortert etter nyeste først!
    </p>
    {{ end }}
    
    <div class="post-list">
        {{ range (sort .Pages "Date" "desc") }}
        <div class="post-card">
            {{ if .Params.featured_image }}
            <img src="{{ .Params.featured_image }}" alt="{{ .Title }}" class="post-image">
            {{ if eq .Section "posts" }}
            <div class="post-overlay">
                {{ if in .Tags "kommende-spill" }}KOMMER SNART{{ else if in .Tags "anmeldelser" }}ANMELDELSE{{ else if in .Tags "nyheter" }}NYHETER{{ else }}GAMING{{ end }}
            </div>
            {{ end }}
            {{ else }}
            <div style="height: 200px; background: linear-gradient(45deg, #DAA520, #FF6F61); display: flex; align-items: center; justify-content: center;">
                <span style="font-size: 3rem;">🎮</span>
            </div>
            {{ end }}
            <div class="post-content">
                <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
                <p class="date">{{ .Date.Format "2. January 2006" }}</p>
                {{ if .Params.tags }}
                <div style="margin: 0.5rem 0;">
                    {{ range first 3 .Params.tags }}
                    <span style="background: rgba(218, 165, 32, 0.2); color: #DAA520; padding: 0.2rem 0.5rem; border-radius: 15px; font-size: 0.8rem; margin-right: 0.5rem;">
                        #{{ . }}
                    </span>
                    {{ end }}
                </div>
                {{ end }}
                {{ if .Summary }}
                <p class="summary" style="color: #F5E8D8; opacity: 0.8; margin-top: 0.5rem;">{{ .Summary | truncate 150 }}</p>
                {{ end }}
            </div>
        </div>
        {{ end }}
    </div>
    
    {{ if eq .Section "posts" }}
    <div style="text-align: center; margin-top: 3rem; padding: 2rem; background: rgba(218, 165, 32, 0.1); border-radius: 10px;">
        <h3 style="color: #DAA520; margin-bottom: 1rem;">🎯 Savner du noe?</h3>
        <p style="color: #F5E8D8; opacity: 0.8;">
            Har du forslag til spill vi bør anmelde eller gaming-emner vi bør dekke? 
            <a href="/about/" style="color: #FF6F61; text-decoration: none;">Kontakt oss!</a>
        </p>
    </div>
    {{ end }}
</div>

{{ end }}
{{ end }}