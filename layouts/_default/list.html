{{ define "main" }}
  {{ if .Paginator.Pages }}
    <div class="post-grid">
      {{ range where .Paginator.Pages "Type" "post" }}
        <div class="post-card">
          {{ with .Params.featured_image }}
            <img src="{{ . | relURL }}" alt="{{ $.Title | default "Post image" }}">
          {{ end }}

          <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>

          <div class="post-meta">
            {{ .Date.Format "2. January 2006" }}
          </div>

          {{ with .Summary }}
            <p>{{ . }}</p>
          {{ end }}

          {{ with .Params.tags }}
            <div class="post-tags" style="display: flex; flex-wrap: wrap; gap: 0.4rem; margin-top: 0.5rem;">
              {{ range . }}
                <span class="tag">#{{ . }}</span>
              {{ end }}
            </div>
          {{ end }}
        </div>
      {{ end }}
    </div>

    {{ if gt .Paginator.TotalPages 1 }}
      <div class="pagination">
        {{ if .Paginator.HasPrev }}
          <a href="{{ .Paginator.Prev.URL }}" class="prev">← Forrige</a>
        {{ end }}
        {{ if .Paginator.HasNext }}
          <a href="{{ .Paginator.Next.URL }}" class="next">Neste →</a>
        {{ end }}
      </div>
    {{ end }}
  {{ else }}
    <p>Ingen innlegg funnet.</p>
  {{ end }}
{{ end }}